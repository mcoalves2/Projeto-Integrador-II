<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8"/>
	<title>Cond.OS</title>
	<link rel="stylesheet" href="index.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
	<script src="https://kit.fontawesome.com/d1e6d2d7ee.js" crossorigin="anonymous"></script>
</head>
<body>
	<div class="container my-3 sticky-top">
		<div class="row p-3 pb-3 pe-lg-3 pt-lg-5 align-items-center rounded-3 border shadow-lg">
			<ul class="nav col-12 col-lg-auto my-2 my-md-1 text-small">

				<li>
				   <a href="#" class="btn btn-outline-primary" style="border:0;">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="bi d-block mx-auto mb-1" width="24" height="24">
						<!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
						<path d="M336 64h-53.88C268.9 26.8 233.7 0 192 0S115.1 26.8 101.9 64H48C21.5 64 0 85.48 0 112v352C0 490.5 21.5 512 48 512h288c26.5 0 48-21.48 48-48v-352C384 85.48 362.5 64 336 64zM96 392c-13.25 0-24-10.75-24-24S82.75 344 96 344s24 10.75 24 24S109.3 392 96 392zM96 296c-13.25 0-24-10.75-24-24S82.75 248 96 248S120 258.8 120 272S109.3 296 96 296zM192 64c17.67 0 32 14.33 32 32c0 17.67-14.33 32-32 32S160 113.7 160 96C160 78.33 174.3 64 192 64zM304 384h-128C167.2 384 160 376.8 160 368C160 359.2 167.2 352 176 352h128c8.801 0 16 7.199 16 16C320 376.8 312.8 384 304 384zM304 288h-128C167.2 288 160 280.8 160 272C160 263.2 167.2 256 176 256h128C312.8 256 320 263.2 320 272C320 280.8 312.8 288 304 288z"/>
					</svg>
					Agenda
				  </a>
				</li>
				<li>
				  <a href="#" class="nav-link text-white">
					<svg class="bi d-block mx-auto mb-1" width="24" height="24"><use xlink:href="#grid"></use></svg>
					Products
				  </a>
				</li>
				<li>
				  <a href="#" class="nav-link text-white">
					<svg class="bi d-block mx-auto mb-1" width="24" height="24"><use xlink:href="#people-circle"></use></svg>
					Customers
				  </a>
				</li>
			</ul>
		</div>
    </div>

    <div class="container my-5">
		<div class="row p-3 pb-3 pe-lg-3 pt-lg-5 align-items-center rounded-3 border shadow-lg">
		  <h2 class="pb-2 border-bottom">Visualização da Agenda</h2>
          <br />
          <br />
          <br />
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Descrição</th>
                <th>Data/Hora Início</th>
                <th>Data/Hora Fim</th>
                <th>Responsável</th>
              </tr>
            </thead>
            <tbody class="table-group-divider" id="tarefas">
              
            </tbody>
          </table>			

		</div>
    </div>
	<div class="container mx-auto align-items-center">
		<h2 class="pb-2 border-bottom text-center">Cond. OS</h2>
		<h3 class="text-center">O seu organizador de tarefas para condomínios!</h3>
		<h4 class="text-center"><font color=#4169E1>Condomínio Villa D'Italia</font></h4>
	</div>
</body>

<script>

	getData();
  
	async function getData(){
		 const response= await fetch("http://localhost:3000/api/tarefas");
		 //console.log(response);
		 const data= await response.json();
		 console.log(data);
		 length=data.length;
		 console.log(length);
		 var temp="";
		 for(i=0;i<length;i++)
		 {
			dtinicio = new Date(data[i].dt_inicio);
			dtfim = new Date(data[i].dt_fim);
			temp+="<tr>";
			temp+="<td>"+data[i].descricao+"</td>";
			temp+="<td>"+dtinicio.toLocaleDateString() + " - "+ data[i].hora_inicio+"</td>";
			temp+="<td>"+dtfim.toLocaleDateString() + " - "+ data[i].hora_fim+"</td>";
			temp+="<td>"+data[i].responsavel+"</td>";
			temp+="</tr>";
		 }
  
	  document.getElementById("tarefas").innerHTML=temp;
	   }
  
  </script>
</html>
